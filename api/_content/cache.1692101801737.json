{"generatedAt":1692101819350,"generateTime":13,"contents":[{"_path":"/_terms/bno","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Business network operator (BNO)","description":"A coordinating party of a Corda business network who manages the distribution of the app and rules, including membership, for its use.","alias":["Business network operator","Business Network Operator","business network operator","BNO"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A coordinating party of a Corda business network who manages the distribution of the app and rules, including membership, for its use."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the term in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.9/community/introduction/bno.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:bno.md","_source":"content","_file":"_terms/bno.md","_extension":"md"},{"_path":"/_terms/corda-business-network","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Corda business network","description":"A logical network based on a set of common CorDapps as well as a shared business context;  a sub-group of Corda Network participants coordinated by a BNO","alias":["corda business network","CBN"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A logical network based on a set of common CorDapps as well as a shared business context;  a sub-group of Corda Network participants coordinated by a BNO"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the term in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.9/enterprise/network/corda-networks.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:corda-business-network.md","_source":"content","_file":"_terms/corda-business-network.md","_extension":"md"},{"_path":"/_terms/corda-network","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Corda Network","description":"A publicly-available internet of Corda nodes operated by network participants","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A publicly-available internet of Corda nodes operated by network participants"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See more in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.9/community/corda-network/corda-network-foundation.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]},{"type":"text","value":" and on the "},{"type":"element","tag":"a","props":{"href":"https://corda.network/","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Corda Network"}]},{"type":"text","value":" official website"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:corda-network.md","_source":"content","_file":"_terms/corda-network.md","_extension":"md"},{"_path":"/_terms/flow","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Flow","description":"A sequence of steps that tells a Corda node how to achieve a specific ledger update","alias":["flow"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A sequence of steps that tells a Corda node how to achieve a specific ledger update"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the term in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.9/community/key-concepts-flows.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:flow.md","_source":"content","_file":"_terms/flow.md","_extension":"md"},{"_path":"/_terms/participant","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Participant","description":"An account that initiates transfer of funds through the Payment Service Provider (PSP)","alias":["participant"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"participant"},"children":[{"type":"text","value":"Participant"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An account that initiates transfer of funds through the Payment Service Provider (PSP)"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:participant.md","_source":"content","_file":"_terms/participant.md","_extension":"md"},{"_path":"/_terms/payment-instruction","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Payment instruction","description":"A payment request formatted according to a specific payment standard (e.g. ISO 20022) sent by the Participant and transformed into a Corda state to be used in the payment flow","alias":["payment instruction","PI"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A payment request formatted according to a specific payment standard (e.g. ISO 20022) sent by the Participant and transformed into a Corda state to be used in the payment flow"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:payment-instruction.md","_source":"content","_file":"_terms/payment-instruction.md","_extension":"md"},{"_path":"/_terms/psp","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"Payment service provider (PSP)","description":"An intermediary (e.g. a bank) between participants who transfer funds and organizations that accept them","alias":["Payment service provider","Payment Service Provider","payment service provider","PSP"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An intermediary (e.g. a bank) between participants who transfer funds and organizations that accept them"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:psp.md","_source":"content","_file":"_terms/psp.md","_extension":"md"},{"_path":"/_terms/state","_dir":"_terms","_draft":false,"_partial":true,"_locale":"","_empty":false,"title":"State","description":"A data structure representing a fact on the ledger","alias":["State","state","states"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A data structure representing a fact on the ledger"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the term in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.8/open-source/key-concepts-states.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:_terms:state.md","_source":"content","_file":"_terms/state.md","_extension":"md"},{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"What's Gevamu?","description":"Gevamu (from Sinhala: ගෙවමු – Let’s pay) Payments Solution, developed by Exactpro based on R3 Corda, is aimed at fund distribution between a payer (the Participant) and a payment service provider (PSP).","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"whats-gevamu"},"children":[{"type":"text","value":"What's Gevamu?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gevamu.com/","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Gevamu (from Sinhala: ගෙවමු – "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Let’s pay"}]},{"type":"text","value":") Payments Solution"}]},{"type":"text","value":", developed by "},{"type":"element","tag":"a","props":{"href":"https://exactpro.com/","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Exactpro"}]},{"type":"text","value":" based on "},{"type":"element","tag":"a","props":{"href":"https://www.r3.com/products/corda/","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 Corda"}]},{"type":"text","value":", is aimed at fund distribution between a payer (the "},{"type":"element","tag":"term","props":{"term":"Participant"},"children":[{"type":"text","value":"Participant"}]},{"type":"text","value":") and a "},{"type":"element","tag":"term","props":{"term":"PSP"},"children":[{"type":"text","value":"payment service provider"}]},{"type":"text","value":" (PSP)."}]},{"type":"element","tag":"h2","props":{"id":"functionality"},"children":[{"type":"text","value":"Functionality"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The solution allows the Participant to initiate a payment flow by calling the Gevamu Payments SDK implemented in a custom Payments CorDapp installed on their node in a "},{"type":"element","tag":"term","props":{"term":"CBN"},"children":[{"type":"text","value":"Corda business network"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A "},{"type":"element","tag":"term","props":{"term":"PI"},"children":[{"type":"text","value":"payment instruction"}]},{"type":"text","value":" submitted by the Participant as a document formatted according to a payment standard (e.g. ISO 20022) is consumed by the Payments CorDapp and passed through the Gevamu Gateway implemented as another CorDapp installed on the Corda node within the same business network."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Gevamu Gateway acts as an authorized end-point connected to the payment gateway on the side of the PSP and transfers the payment instruction received from the Participant on-chain to the PSP located off-chain. The Gevamu Payments solution manages the payment "},{"type":"element","tag":"term","props":{"term":"flow"},"children":[{"type":"text","value":"flow"}]},{"type":"text","value":". As part of the flow, it creates Corda "},{"type":"element","tag":"term","props":{"term":"states"},"children":[{"type":"text","value":"states"}]},{"type":"text","value":" and updates them based on responses received by the Payment Gateway from the PSP. Payment status updates are communicated back to the Participant."}]},{"type":"element","tag":"h2","props":{"id":"structure"},"children":[{"type":"text","value":"Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The solution consists of a payments SDK and a payment gateway, which are to be deployed in a Corda business network managed by a Corda "},{"type":"element","tag":"term","props":{"term":"BNO"},"children":[{"type":"text","value":"Business Network Operator"}]},{"type":"text","value":" (BNO):"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Gevamu  Payments SDK"}]},{"type":"text","value":": a Java/Kotlin library containing classes and methods used by the payment workflow. The SDK’s functionality is the core part of a custom CorDapp developed by the BNO or a third party and installed on the Participant’s node in a Corda business network operated by the BNO."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Gevamu Payments SDK is distributed as an open-source software under Apache-2.0 License. Its source code is "},{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"available on GitHub"}]},{"type":"text","value":". "}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Gevamu Payment Gateway"}]},{"type":"text","value":": a CorDapp managing on-chain payment flows initiated by the Participant through the Gevamu Payments SDK and communicating with an off-chain payment service provider gateway to pass payment instructions and receive payment status updates."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Gevamu Payments Gateway is proprietary technology licensed by Exactpro."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Gevamu Payments SDK and Payments Gateway are developed based on R3 Corda 4.x."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"System requirements of the implementation depend on the scope of a final system.\nFor hardware and software requirements for development on Corda, see official "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.8/open-source/getting-set-up.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"R3 documentation"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"functionality","depth":2,"text":"Functionality"},{"id":"structure","depth":2,"text":"Structure"}]}},"_type":"markdown","_id":"content:1.index.md","_source":"content","_file":"1.index.md","_extension":"md"},{"_path":"/application","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Application","description":"The Gevamu payments solution has been developed to be used within, but not limited to, the following domains:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application"},"children":[{"type":"text","value":"Application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Gevamu payments solution has been developed to be used within, but not limited to, the following domains:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"payment infrastructures"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exchanges and central counterparties"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"DLT-based and hybrid platforms"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"financial standards and protocols"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"asset classes: fiat, digital assets (including CBDCs and NFTs)"}]}]},{"type":"element","tag":"h2","props":{"id":"example-payments-ecosystem"},"children":[{"type":"text","value":"Example: Payments ecosystem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The diagram below illustrates a use case of Gevamu Payments solution being integrated into a hybrid DLT/non-DLT payments ecosystem."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Sample implementation schema","src":"/img/Sample_implementation.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the sample configuration proposed on the diagram, the Gevamu payments solution (Payments SDK and Payments Gateway) interacts with the following components:"}]},{"type":"element","tag":"h3","props":{"id":"client-application"},"children":[{"type":"text","value":"Client Application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Typically, the Client Application is a Web UI or a mobile application on a user’s machine. It is developed by the Participant/BNO organization and customized according to their needs. The Participant provides essential payment information and initiates the payment process in the UI of the Client Application. Subsequently, the Gevamu Payments SDK and Payments Gateway will handle the payment initiation process."}]},{"type":"element","tag":"h3","props":{"id":"middleware"},"children":[{"type":"text","value":"Middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Middleware is a backend to enable communication between the Client Application and the Participant Node in the Corda Network. The payment data specified by the Participant, through the Client Application, is translated into the payment instruction and sent to the Payments CorDapp."}]},{"type":"element","tag":"notice","props":{":info":"true","info":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A sample Client Application UI along with middleware is developed by Exactpro. In this implementation, the middleware communicates with the Client Application via REST API; its communication with the Payments CorDapp is done via Corda RPC. The source code of both sample components is available as a "},{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk/tree/master/payments-app-sample","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"supplementary part of the Payments SDK"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"corda-network"},"children":[{"type":"text","value":"Corda network"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A Corda network is a collection of nodes with a vetted, unique identity that share a common “root of trust” upon which all certificates and signatures are ultimately chained back to. Its subset (business network) is managed by the BNO. In the context of the payment solution described here, such a network hosts the Corda nodes where both parts of the Gevamu solution are deployed as CorDapps."}]},{"type":"element","tag":"h3","props":{"id":"participant-node"},"children":[{"type":"text","value":"Participant node"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Participant node is a node in the Corda business network with the Payments CorDapp installed on it."}]},{"type":"element","tag":"h3","props":{"id":"payments-cordapp"},"children":[{"type":"text","value":"Payments CorDapp"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Payments CorDapp is a custom CorDapp developed by the Participant or the BNO using the Gevamu Payments SDK."}]},{"type":"element","tag":"h3","props":{"id":"gateway-node"},"children":[{"type":"text","value":"Gateway node"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Gateway node is a node in the Corda business network where the Gevamu Payments Gateway is installed.\nEach Gevamu Payments Gateway is custom-written to work with a specific PSP and every payment initiation request requires that the gateway be specified.\nTherefore, with minimal changes, the App using the Payments SDK can connect to different PSPs.\nThe Gateway node communicates on-chain with the Participant’s CorDapp based on the Gevamu Payments SDK via a proprietary API; the connection with the PSP is off-chain."}]},{"type":"element","tag":"h3","props":{"id":"psp-payments-gateway"},"children":[{"type":"text","value":"PSP payments gateway"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The PSP payments gateway is an endpoint of a proprietary off-chain payments solution on the PSP side."}]},{"type":"element","tag":"h3","props":{"id":"supplementary-parts-of-the-payments-sdk"},"children":[{"type":"text","value":"Supplementary parts of the Payments SDK"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Payments SDK:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk/tree/master/payments-contracts","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Payments-Contracts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk/tree/master/payments-workflows","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Payments-Workflows"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Payments App Sample:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk/tree/master/payments-app-sample/payments-app-backend","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Payments App Backend - Gevamu"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/gevamu/corda-payments-sdk/tree/master/payments-app-sample/payments-app-frontend","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Payments App Frontend - Client App"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.iso20022.org/","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"ISO20022 website"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example-payments-ecosystem","depth":2,"text":"Example: Payments ecosystem","children":[{"id":"client-application","depth":3,"text":"Client Application"},{"id":"middleware","depth":3,"text":"Middleware"},{"id":"corda-network","depth":3,"text":"Corda network"},{"id":"participant-node","depth":3,"text":"Participant node"},{"id":"payments-cordapp","depth":3,"text":"Payments CorDapp"},{"id":"gateway-node","depth":3,"text":"Gateway node"},{"id":"psp-payments-gateway","depth":3,"text":"PSP payments gateway"},{"id":"supplementary-parts-of-the-payments-sdk","depth":3,"text":"Supplementary parts of the Payments SDK"}]}]}},"_type":"markdown","_id":"content:2.application.md","_source":"content","_file":"2.application.md","_extension":"md"},{"_path":"/workflow","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Workflow","description":"Within the use case example introduced in the Application section, the Gevamu Payment solution supports the following business flows:","navigation":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"workflow"},"children":[{"type":"text","value":"Workflow"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Within the use case example introduced in the "},{"type":"element","tag":"a","props":{"href":"/application"},"children":[{"type":"text","value":"Application"}]},{"type":"text","value":" section, the Gevamu Payment solution supports the following business flows:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/workflow/BNO-onboarding"},"children":[{"type":"text","value":"BNO onboarding"}]},{"type":"text","value":": registration of the Gevamu Payments Gateway with the PSP."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/workflow/participant-onboarding"},"children":[{"type":"text","value":"Participant onboarding"}]},{"type":"text","value":": registration of a Participant in the BNO network and with Gevamu Payments Gateway."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/workflow/payment-initiation"},"children":[{"type":"text","value":"Payment initiation"}]},{"type":"text","value":": a process initiated by the Participant and handled by Gevamu solution, with real-time status updates."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Workflows supported by the Gevamu solution","src":"/img/Workflows.png?31.07.2023"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.workflow:1.index.md","_source":"content","_file":"3.workflow/1.index.md","_extension":"md"},{"_path":"/workflow/bno-onboarding","_dir":"workflow","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"1. BNO onboarding","description":"The BNO onboarding process consists of the following steps:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"1-bno-onboarding"},"children":[{"type":"text","value":"1. BNO onboarding"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The BNO onboarding process consists of the following steps:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The PSP provides HTTPS endpoint details (destination of payment initiation requests), and assigns a Network ID to the BNO."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The BNO provides HTTPS endpoint details (destination of status updates) to the PSP."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The BNO sets up the Payments Gateway as a node within their Corda network (Gevamu Payments Gateway binaries are provided by Exactpro) using configuration details exchanged previously."}]}]},{"type":"element","tag":"mermaid","props":{"code":"c2VxdWVuY2VEaWFncmFtCiAgICAgYXV0b251bWJlcgoKICAgICUlIGNvZGUgYmxvY2sgJSUgCiAgICBwYXJ0aWNpcGFudCBwc3AgYXMgUFNQCiAgICBib3ggQ29yZGEgTmV0d29yawogICAgcGFydGljaXBhbnQgYm5vIGFzIEJOTwogICAgcGFydGljaXBhbnQgZ3BnIGFzIEdldmFtdSBQYXltZW50IEdhdGV3YXkKICAgIGVuZAoKICAgIE5vdGUgcmlnaHQgb2YgcHNwOiBPZmYtY2hhaW4KICAgIHBzcCAtPj4gYm5vOiBQcm92aWRlcyBIVFRQUyBlbmRwb2ludCBkZXRhaWxzPGJyLz4gQXNzaWducyBOZXR3b3JrIElEIHRvIEJOTwogICAgYm5vIC0+PiBwc3A6IFByb3ZpZGVzIEhUVFBTIGVuZHBvaW50IGRldGFpbHMKICAgIAogICAgTm90ZSByaWdodCBvZiBibm86IE9uLWNoYWluCiAgICBibm8gLT4+IGdwZzogQk5PIHNldHMgdXAgdGhlIFBheW1lbnRzIEdhdGV3YXk="},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.workflow:2.BNO-onboarding.md","_source":"content","_file":"3.workflow/2.BNO-onboarding.md","_extension":"md"},{"_path":"/workflow/participant-onboarding","_dir":"workflow","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"2. Participant onboarding","description":"To onboard the Participant, the following steps are performed:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"2-participant-onboarding"},"children":[{"type":"text","value":"2. Participant onboarding"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To onboard the Participant, the following steps are performed:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Participant requests to join the Payments network."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Gevamu Payments Gateway provides the Participant with the Network ID, assigns them a Participant ID, and registers the Payments CorDapp."}]}]},{"type":"element","tag":"notice","props":{":info":"true","info":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These IDs are required when initiating payments.  The SDK does not have a functionality to save them – saving these IDs is the task of the application that uses the SDK."}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Network ID and Participant ID are displayed in the Client Application."}]}]},{"type":"element","tag":"mermaid","props":{"code":"LS0tCnRpdGxlIDogUmVnaXN0cmF0aW9uIHVzaW5nIEdldmFtdQotLS0Kc2VxdWVuY2VEaWFncmFtCiAKICUlIHVzaW5nIHNsaWRlIDEyCgogIHBhcnRpY2lwYW50IGNhIGFzIENsaWVudCBBcHBsaWNhdGlvbgogIGJveCBDb3JkYSBOZXR3b3JrCiAgcGFydGljaXBhbnQgcGMgYXMgUGF5bWVudCBDb3JEYXBwIDxici8+IHBvd2VyZWQgYnkgPGJyLz4gR2V2YW11IFBheW1lbnQgU0RLIAogIHBhcnRpY2lwYW50IGduIGFzIEdldmFtdSA8YnIvPiBQYXltZW50cyBHYXRld2F5IDxici8+IE5vZGUKICBlbmQKIAogIGNhIC0+PiBwYzogUmVxdWVzdCB0byBqb2luIDxici8+YXMgYSBQYXJ0aWNpcGFudAoKICBwYyAtPj4gZ246IFJlZ2lzdHJhdGlvbiByZXF1ZXN0CiAgTm90ZSByaWdodCBvZiBwYzogT24tY2hhaW4KICBnbiAtPj4gcGM6IFByb3ZpZGUgTmV0d29yayBJRCA8YnIvPiBBc3NpZ24gUGFydGljaXBhbnQgSUQKICAKICBwYyAtPj4gY2E6IFBhcnRpY2lwYW50J3MgY3JlZGVudGlhbHMKICBjYSAtPj4gY2E6IERpc3BsYXkgTmV0d29yayBJRCA8YnIvPiBhbmQgUGFydGljaXBhbnQgSUQ="},"children":[]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"(Off-Chain) To access the payments service, the Participant registers with the PSP directly by submitting the combination of the Network ID and Participant ID received from the Payments Gateway."}]}]},{"type":"element","tag":"mermaid","props":{"code":"LS0tCnRpdGxlIDogUGFydGljaXBhbnQgcmVnaXN0ZXJzIHdpdGggUFNQL0JhbmsKLS0tCnNlcXVlbmNlRGlhZ3JhbQoKcGFydGljaXBhbnQgcCBhcyBQYXJ0aWNpcGFudApwYXJ0aWNpcGFudCBwc3AgYXMgUFNQCnAgLT4+IHBzcDogUmVnaXN0ZXIgd2l0aCBQU1AgdXNpbmcgTmV0d29yayBJRCBhbmQgUGFydGljaXBhbnQgSUQ="},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.workflow:3.participant-onboarding.md","_source":"content","_file":"3.workflow/3.participant-onboarding.md","_extension":"md"},{"_path":"/workflow/payment-initiation","_dir":"workflow","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"3. Payment initiation","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"3-payment-initiation"},"children":[{"type":"text","value":"3. Payment initiation"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Participant initiates the payment transaction off-chain via a Web UI. The payment request is handled by a web server on the Participant’s node of the Corda business network and sent via Corda RPC to the custom Payment CorDapp installed on the Participant’s node."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Participant’s request is accepted by the CorDapp on the Participant’s node and is transformed to a payment instruction formatted according to the industry-accepted payment standard (ISO 20022 formatted XML representing a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CustomerCreditTransferInitiation"}]},{"type":"text","value":" message) to be passed to Gevamu Payments SDK. Gevamu Payments SDK pre-validates the payment instruction and creates a state (or several states if multiple payments are instructed) with an attachment containing the original payment instruction. Every single payment gets it's own unique ID (UUID), which can be used to find it, if necessary."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The payment instruction is sent to Gevamu Payments Gateway."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Gevamu Payments Gateway validates the payment instruction."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The Payments Gateway checks if the Participant is authorized to submit this payment request, validating the payment instruction from the following aspects:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Node Identity – whether a payment request is received from the node that initially registered the Participant initiating the request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Participant ID – whether the Participant is registered with the Payments network and if Participant ID is registered to the Participant’s node."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If valid, the Payment Gateway sends the payment instruction to the external gateway of the PSP, updates the status of the payment instruction to "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Sent to Gateway"}]},{"type":"text","value":" and communicates it to the Participant."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If not valid, a corresponding status is sent back to the Participant’s CorDapp."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"After the payment instruction is received by the PSP, it will return one of the following payment status:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Pending"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Accepted"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Rejected"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Once the PSP replies to the payment request, the returned payment status is propagated back to the Participant’s node. The updated status is made available as a new Corda state in the payment statuses chain."},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The participant’s CorDapp may opt to subscribe to the payment state updates to be notified on Payment processing progress."}]}]}]}]},{"type":"element","tag":"mermaid","props":{"code":"LS0tCnRpdGxlOiBJbml0aWF0ZSBQYXltZW50Ci0tLQpzZXF1ZW5jZURpYWdyYW0KICAgICUlIFBhcnRpY2lwYW50cwogICAgcGFydGljaXBhbnQgcG4gYXMgUGFydGljaXBhbnQgTm9kZQogICAgcGFydGljaXBhbnQgZ3BnIGFzIEdldmFtdSBQYXltZW50IEdhdGV3YXkKICAgIHBhcnRpY2lwYW50IHBzcCBhcyBQU1AvQmFuawoKICAgIHBuIC0+PiBwbjogUmVjZWl2ZSBQYXltZW50IGluc3RydWN0aW9uLCAgPGJyLz4gdHJhbnNmb3JtIGludG8gSVNPIDIwMDIyIGZvcm1hdHRlZCBYTUwKICAgIHBuIC0+PiBwbjogU0RLIHByZXZhbGlkYXRlcyBYTUwKCiAgICAlJXByZXZhbGlkYXRpb24gYnkgU0RLCiAgICAKICAgIHBuICAtPj4gIHBuOiBDcmVhdGUgQ29yZGEgc3RhdGUKICAgIHBuICAtPj4gZ3BnOiBQYXltZW50IHJlcXVlc3QKICAgIGdwZyAtPj4gZ3BnOiBWYWxpZGF0ZSBwYXltZW50IHJlcXVlc3QgIDxici8+IChjaGVjayBub2RlIGFuZCBQYXJ0aWNpcGFudCBpZGVudGl0eSkKCiAgICAlJSBhZnRlciB2YWxpZGF0aW9uIGJ5IEdhdGV3YXkKCiAgICBncGcgLT4+IHBzcDogUGF5bWVudCBpbnN0cnVjdGlvbgogICAgZ3BnIC0+PiBwbjogIFVwZGF0ZSBDb3JkYSBzdGF0ZSA8YnIvPiBQYXltZW50IFN0YXR1czogU2VudCB0byBHYXRld2F5CgogICAgJSUgUGVuZGluZyBTdGF0dXMgYnkgUFNQCiAgICBhbHQgUFNQIHNldHMgUGF5bWVudCBzdGF0dXMgYXMgUGVuZGluZwogICAgcHNwIC0+PiBncGc6IFBheW1lbnQgU3RhdHVzOiBQZW5kaW5nCiAgICBncGcgLT4+IHBuIDogVXBkYXRlIENvcmRhIHN0YXRlIDxici8+IFBheW1lbnQgU3RhdHVzOiBQZW5kaW5nIAogICAgCiAgICAlJSBSZXF1ZXN0IGhhcyBiZWVuIHByb2Nlc3NlZCBieSBQU1AgCiAgICBlbHNlIFBTUCBwcm9jZXNzZXMgUGF5bWVudCBJbnN0cnVjdGlvbgogICAgcHNwIC0+PiBncGc6IFBheW1lbnQgU3RhdHVzOiBBY2NlcHRlZC9SZWplY3RlZAogICAgZ3BnIC0+PiBwbiA6IFVwZGF0ZSBDb3JkYSBzdGF0ZSA8YnIvPiBQYXltZW50IFN0YXR1czogQWNjZXB0ZWQvUmVqZWN0ZWQgCiAgICBlbmQ="},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.workflow:4.payment-initiation.md","_source":"content","_file":"3.workflow/4.payment-initiation.md","_extension":"md"},{"_path":"/examples","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Examples","description":"This section contains examples illustrating how to use various features of the Gevamu Payments Solution.","navigation":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This section contains examples illustrating how to use various features of the Gevamu Payments Solution."}]},{"type":"element","tag":"h2","props":{"id":"architecture"},"children":[{"type":"text","value":"Architecture"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To demonstrate a possible architecture of your app integrated with the Gevamu Payments Solution, we'll use an abstract CorDapp as a sample (shown as "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Your App"}]},{"type":"text","value":" on the diagram below)."}]},{"type":"element","tag":"mermaid","props":{"code":"LS0tCnRpdGxlOiBEZXBlbmRlbmNpZXMKLS0tCgpmbG93Y2hhcnQgTFIKICB0YXJnZXRbWW91ciBBcHBdCiAgbmV0LmNvcmRhOmNvcmRhLWNvcmUgLS0+IHRhcmdldAogIGNvbS5nZXZhbXUuY29yZGE6cGF5bWVudHMtd29ya2Zsb3dzIC0tPiB0YXJnZXQKICBjb20uZ2V2YW11LmNvcmRhOnBheW1lbnRzLWNvbnRyYWN0cyAtLT4gdGFyZ2V0CiAgY3VzdG9tWy4uLiB5b3VyIGRlcGVuZGVuY2llc10gLS0+IHRhcmdldA=="},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See a sample dependencies configuration in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"build.gradle.kts"}]},{"type":"text","value":" file:"}]},{"type":"element","tag":"code","props":{"code":"repositories {\n    mavenCentral()\n    // Repository with Corda artifacts\n    maven(\"https://software.r3.com/artifactory/corda\")\n}\n\ndependencies {\n    // Core Corda dependencies\n    implementation(\"net.corda:corda-core:4.9.3\")\n    // Gevamu dependencies\n    implementation(\"com.gevamu.corda:payments-workflows:0.1.0\")\n    implementation(\"com.gevamu.corda:payments-contracts:0.1.0\")\n}\n\n","filename":"build.gradle.kts","language":"kotlin","meta":"[build.gradle.kts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"repositories {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    mavenCentral()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1fb40b"},"children":[{"type":"text","value":"// Repository with Corda artifacts"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    maven("}]},{"type":"element","tag":"span","props":{"class":"ct-c9eac4"},"children":[{"type":"text","value":"\"https://software.r3.com/artifactory/corda\""}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"dependencies {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1fb40b"},"children":[{"type":"text","value":"// Core Corda dependencies"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    implementation("}]},{"type":"element","tag":"span","props":{"class":"ct-c9eac4"},"children":[{"type":"text","value":"\"net.corda:corda-core:4.9.3\""}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1fb40b"},"children":[{"type":"text","value":"// Gevamu dependencies"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    implementation("}]},{"type":"element","tag":"span","props":{"class":"ct-c9eac4"},"children":[{"type":"text","value":"\"com.gevamu.corda:payments-workflows:0.1.0\""}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    implementation("}]},{"type":"element","tag":"span","props":{"class":"ct-c9eac4"},"children":[{"type":"text","value":"\"com.gevamu.corda:payments-contracts:0.1.0\""}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Examples in this section demonstrate a sample implementation of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"text","value":" class. This class utilizes the facade pattern and provides a simple interface to the Gevamu Payments Solution."}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgR2V2YW11RmFjYWRlIHsKICAgICsgcmVnaXN0ZXJQYXJ0aWNpcGFudCgpCiAgICArIHNlbmRQYXltZW50KCkKICAgICsgcXVlcnlQYXltZW50cygpCiAgfQ=="},"children":[]},{"type":"element","tag":"h2","props":{"id":"template"},"children":[{"type":"text","value":"Template"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to have access to Corda flows and services, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"text","value":" class should be implemented as a Corda service, see the example below:"}]},{"type":"element","tag":"code","props":{"code":"import net.corda.core.node.AppServiceHub\nimport net.corda.core.node.services.CordaService\nimport net.corda.core.serialization.SingletonSerializeAsToken\n\n@CordaService\nclass GevamuFacade(private val serviceHub: AppServiceHub): SingletonSerializeAsToken() {\n    // Here goes the implementation of the GevamuFacade class\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"net.corda.core.node.AppServiceHub"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"net.corda.core.node.services.CordaService"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"net.corda.core.serialization.SingletonSerializeAsToken"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"@CordaService"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bd0b7c"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"serviceHub"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"AppServiceHub"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-fa63a5"},"children":[{"type":"text","value":"SingletonSerializeAsToken"}]},{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1fb40b"},"children":[{"type":"text","value":"// Here goes the implementation of the GevamuFacade class"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c73899"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Read more about Corda services implementation in "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.7/enterprise/cordapps/api-service-classes.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Corda documentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-fa63a5{color:#E5C07B}\n.ct-bd0b7c{color:#C678DD}\n.ct-c9eac4{color:#98C379}\n.ct-1fb40b{color:#7F848E}\n.ct-c73899{color:#ABB2BF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"architecture","depth":2,"text":"Architecture"},{"id":"template","depth":2,"text":"Template"}]}},"_type":"markdown","_id":"content:4.examples:0.index.md","_source":"content","_file":"4.examples/0.index.md","_extension":"md"},{"_path":"/examples/query-payment-states","_dir":"examples","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Payment state queries","description":"Corda stores the state of a payment in the vault of the node that initiated the payment, so you can access the state of a payment by querying the vault.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"payment-state-queries"},"children":[{"type":"text","value":"Payment state queries"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Corda stores the state of a payment in the vault of the node that initiated the payment, so you can access the state of a payment by querying the vault."}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgTXlQYXltZW50U2VydmljZSB7CiAgICArIHF1ZXJ5UGF5bWVudHNWaWFHZXZhbXUoKQogIH0KICBjbGFzcyBHZXZhbXVGYWNhZGUgewogICAgKyBnZXRQYXltZW50KCkKICAgICsgcXVlcnlQYXltZW50cygpCiAgfQoKICBNeVBheW1lbnRTZXJ2aWNlIC4uPiBHZXZhbXVGYWNhZGU="},"children":[]},{"type":"element","tag":"h2","props":{"id":"payment-state-structure"},"children":[{"type":"text","value":"Payment state structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The structure of the "},{"type":"element","tag":"a","props":{"href":"https://gevamu.github.io/corda-payments-sdk/payments-contracts/com.gevamu.corda.states/-payment/index.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Payment"}]}]},{"type":"text","value":" state is as follows:"}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgUGF5bWVudCB7CiAgICArIHBheWVyOiBQYXJ0eQogICAgKyBnYXRld2F5OiBQYXJ0eQogICAgKyBlbmRUb0VuZElkOiBTdHJpbmcKICAgICsgcGF5bWVudEluc3RydWN0aW9uSWQ6IEF0dGFjaG1lbnRJZAogICAgKyBzdGF0dXM6IFBheW1lbnRTdGF0dXMKICAgICsgYWRkaXRpb25hbEluZm86IFN0cmluZz8KICAgICsgdW5pcXVlUGF5bWVudElkOiBVVUlECiAgICArIHRpbWVzdGFtcDogSW5zdGFudAogIH0KCiAgY2xhc3MgUGF5bWVudFN0YXR1c3sKICAgIDw8ZW51bWVyYXRpb24+PgogICAgQ1JFQVRFRAogICAgU0VOVF9UT19HQVRFV0FZCiAgICBBQ0NFUFRFRAogICAgUEVORElORwogICAgQ09NUExFVEVECiAgICBSRUpFQ1RFRAogIH0KCiAgY2xhc3MgQXR0YWNobWVudCB7CiAgICA8PGludGVyZmFjZT4+CiAgICArIGlkOiBTZWN1cmVIYXNoCiAgICArIG9wZW4oKTogSW5wdXRTdHJlYW0KICB9CgogIFBheW1lbnQgby0tIFBheW1lbnRTdGF0dXMKICBQYXltZW50IC4uIEF0dGFjaG1lbnQ6IHBheW1lbnRJbnN0cnVjdGlvbklkIC0tPiBpZA=="},"children":[]},{"type":"element","tag":"notice","props":{":info":"true","info":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that a full payment instruction is stored as a Corda "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/api-ref/corda/4.8/open-source/javadoc/net/corda/core/contracts/Attachment.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Attachment"}]}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h2","props":{"id":"vault-queries"},"children":[{"type":"text","value":"Vault queries"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Every Corda node has a vault that stores all the states created by the node (in our case, the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Payment"}]},{"type":"text","value":" states)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Corda provides a powerful query language to search for states in the vault – learn more about "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/platform/corda/4.7/enterprise/cordapps/api-vault-query.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"text","value":"Writing vault queries"}]},{"type":"text","value":" in Corda documentation."}]},{"type":"element","tag":"notice","props":{":warning":"true","warning":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gevamu SDK doesn't provide any ready-to-use solution for querying by payments details stored in the attachment. However, you can create additional tables with the information specific to your business needs and use them in vault queries.\nTo get all payment details from the attachment, download and deserialize it."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create queries for the Gevamu payments, use the following imports:"}]},{"type":"element","tag":"code","props":{"code":"// Corda imports\nimport net.corda.core.node.services.vault.QueryCriteria\n// Gevamu SDK imports\nimport com.gevamu.corda.schema.PaymentSchemaV1\nimport com.gevamu.corda.states.Payment\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Corda imports"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"net.corda.core.node.services.vault.QueryCriteria"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Gevamu SDK imports"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.schema.PaymentSchemaV1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.states.Payment"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-a-single-payment"},"children":[{"type":"text","value":"Getting a single payment"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To find a unique payment, search by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"uniquePaymentId"}]},{"type":"text","value":" field, accepted by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getPayment"}]},{"type":"text","value":" method as a parameter."}]},{"type":"element","tag":"code","props":{"code":"import java.util.UUID\nimport net.corda.core.node.services.vault.QueryCriteria\nimport com.gevamu.corda.schema.PaymentSchemaV1\nimport com.gevamu.corda.states.Payment\n\nclass GevamuFacade {\n    fun getPayment(uniquePaymentId: UUID): StateAndRef<Payment>? {\n        // Create custom query criteria to search by id\n        val criteria = QueryCriteria.VaultCustomQueryCriteria(\n            // Pay attention to method `equal` here. It is not `equals`!\n            PaymentSchemaV1.PersistentPayment::uniquePaymentId.equal(uniquePaymentId)\n        )\n        // Query vault and return single payment state\n        return serviceHub.vaultService.queryBy<Payment>(criteria).states.singleOrNull()\n    }\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"java.util.UUID"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"net.corda.core.node.services.vault.QueryCriteria"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.schema.PaymentSchemaV1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.states.Payment"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbbe1e"},"children":[{"type":"text","value":"getPayment"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"uniquePaymentId"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"UUID"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"StateAndRef"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"? {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Create custom query criteria to search by id"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" criteria "}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"QueryCriteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"VaultCustomQueryCriteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Pay attention to method `equal` here. It is not `equals`!"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"PaymentSchemaV1"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"PersistentPayment"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"::uniquePaymentId.equal(uniquePaymentId)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        )"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Query vault and return single payment state"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" serviceHub.vaultService.queryBy"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"(criteria).states.singleOrNull()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"payment-queries"},"children":[{"type":"text","value":"Payment queries"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Search criteria for payments can be unique to particular business use cases. The following example shows a generic method for querying payments."}]},{"type":"element","tag":"code","props":{"code":"import net.corda.core.node.services.vault.QueryCriteria\nimport com.gevamu.corda.states.Payment\n\nclass GevamuFacade {\n    fun queryPayments(criteria: QueryCriteria): List<StateAndRef<Payment>> {\n        // Query vault and return list of payment states\n        return serviceHub.vaultService.queryBy<Payment>(criteria).states\n    }\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"net.corda.core.node.services.vault.QueryCriteria"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.states.Payment"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbbe1e"},"children":[{"type":"text","value":"queryPayments"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"criteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"QueryCriteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"StateAndRef"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Query vault and return list of payment states"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" serviceHub.vaultService.queryBy"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"(criteria).states"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"payment-queries-by-date-range"},"children":[{"type":"text","value":"Payment queries by date range"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Querying objects by a date range is a common task for different business domains. The following example shows how to implement this functionality in relation to the Gevamu Payment solution:"}]},{"type":"element","tag":"code","props":{"code":"import java.time.Instant\nimport net.corda.core.node.services.vault.QueryCriteria\nimport com.gevamu.corda.schema.PaymentSchemaV1\nimport com.gevamu.corda.states.Payment\n\nclass GevamuFacade {\n    fun queryPaymentsByDateRange(from: Instant, to: Instant): List<StateAndRef<Payment>> {\n        // Create custom query criteria to search by date range\n        val criteria = QueryCriteria.VaultCustomQueryCriteria(\n            PaymentSchemaV1.PersistentPayment::timestamp.between(from, to)\n        )\n        // Query vault and return list of payment states\n        return serviceHub.vaultService.queryBy<Payment>(criteria).states\n    }\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"java.time.Instant"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"net.corda.core.node.services.vault.QueryCriteria"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.schema.PaymentSchemaV1"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"com.gevamu.corda.states.Payment"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbbe1e"},"children":[{"type":"text","value":"queryPaymentsByDateRange"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Instant"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Instant"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"StateAndRef"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Create custom query criteria to search by date range"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" criteria "}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"QueryCriteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"VaultCustomQueryCriteria"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"PaymentSchemaV1"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"PersistentPayment"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"::timestamp.between(from, to)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        )"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f42c21"},"children":[{"type":"text","value":"// Query vault and return list of payment states"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8fd63"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":" serviceHub.vaultService.queryBy"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-6ba1b0"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-81911e"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"(criteria).states"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-96e7e7"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-81911e{color:#56B6C2}\n.ct-dbbe1e{color:#61AFEF}\n.ct-6ba1b0{color:#E5C07B}\n.ct-96e7e7{color:#ABB2BF}\n.ct-c8fd63{color:#C678DD}\n.ct-f42c21{color:#7F848E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"payment-state-structure","depth":2,"text":"Payment state structure"},{"id":"vault-queries","depth":2,"text":"Vault queries"},{"id":"getting-a-single-payment","depth":2,"text":"Getting a single payment"},{"id":"payment-queries","depth":2,"text":"Payment queries","children":[{"id":"payment-queries-by-date-range","depth":3,"text":"Payment queries by date range"}]}]}},"_type":"markdown","_id":"content:4.examples:query-payment-states.md","_source":"content","_file":"4.examples/query-payment-states.md","_extension":"md"},{"_path":"/examples/register-participant","_dir":"examples","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Participant registration","description":"In order to send payments, you need to register a Participant within the Gevamu Payments Solution. This example shows how to register a Participant node.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"participant-registration"},"children":[{"type":"text","value":"Participant registration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to send payments, you need to register a Participant within the Gevamu Payments Solution. This example shows how to register a Participant node."}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgTXlQYXltZW50U2VydmljZSB7CiAgICArIHJlZ2lzdGVyVmlhR2V2YW11KCkKICB9CiAgY2xhc3MgR2V2YW11RmFjYWRlIHsKICAgICsgcmVnaXN0ZXJQYXJ0aWNpcGFudCgpCiAgfQoKICBNeVBheW1lbnRTZXJ2aWNlIC4uPiBHZXZhbXVGYWNhZGU="},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Gevamu Payments Solution provides "},{"type":"element","tag":"a","props":{"href":"https://gevamu.github.io/corda-payments-sdk/payments-workflows/com.gevamu.corda.flows/-register-participant-flow/index.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RegisterParticipantFlow"}]}]},{"type":"text","value":" as the flow for registration and "},{"type":"element","tag":"a","props":{"href":"https://gevamu.github.io/corda-payments-sdk/payments-workflows/com.gevamu.corda.flows/-participant-registration/index.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ParticipantRegistration"}]}]},{"type":"text","value":" as the participant registration record."}]},{"type":"element","tag":"h2","props":{"id":"registering-a-participant-node-using-classes-provided-by-gevamu-sdk"},"children":[{"type":"text","value":"Registering a Participant Node using classes provided by Gevamu SDK"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See an example of calling "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RegisterParticipantFlow"}]},{"type":"text","value":" below:"}]},{"type":"element","tag":"code","props":{"code":"import com.gevamu.corda.flows.ParticipantRegistration\nimport com.gevamu.corda.flows.RegisterParticipantFlow\nimport net.corda.core.identity.Party\nimport net.corda.core.node.services.CordaService\n\nclass GevamuFacade {\n  \n  fun registerParticipant(gateway: Party): ParticipantRegistration {\n        val flowHandle = serviceHub.startFlow(RegisterParticipantFlow(gateway))\n        return flowHandle.returnValue.get()\n    }\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"com.gevamu.corda.flows.ParticipantRegistration"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"com.gevamu.corda.flows.RegisterParticipantFlow"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"net.corda.core.identity.Party"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"net.corda.core.node.services.CordaService"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"  "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b9c63"},"children":[{"type":"text","value":"registerParticipant"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"gateway"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"Party"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"ParticipantRegistration"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" flowHandle "}]},{"type":"element","tag":"span","props":{"class":"ct-b84a6e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" serviceHub.startFlow("}]},{"type":"element","tag":"span","props":{"class":"ct-9a1a46"},"children":[{"type":"text","value":"RegisterParticipantFlow"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"(gateway))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c8b397"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":" flowHandle.returnValue.get()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-425cb4"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"RegisterParticipantFlow"}]},{"type":"text","value":" requests registration from the Gevamu Gateway node identified via the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Party"}]},{"type":"text","value":" instance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may choose to design your CorDapp so that it initiates the Participant node registration flow via an RPC call or using the "},{"type":"element","tag":"a","props":{"href":"https://docs.r3.com/en/api-ref/corda/4.8/open-source/kotlin/corda/net.corda.core.node/-service-hub/index.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"serviceHub"}]}]},{"type":"text","value":" as in the example above."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Upon successful registration, the Payment Gateway node returns the participant registration record with the Participant ID and the BNO Network ID.\nThe structure of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ParticipantRegistration"}]},{"type":"text","value":" data class is shown below."}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgUGFydGljaXBhbnRSZWdpc3RyYXRpb24gewogICAgbmV0d29ya0lkOiBTdHJpbmcKICAgIHBhcnRpY2lwYW50SWQ6IFN0cmluZwogIH0="},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b84a6e{color:#56B6C2}\n.ct-3b9c63{color:#61AFEF}\n.ct-9a1a46{color:#E5C07B}\n.ct-425cb4{color:#ABB2BF}\n.ct-c8b397{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"registering-a-participant-node-using-classes-provided-by-gevamu-sdk","depth":2,"text":"Registering a Participant Node using classes provided by Gevamu SDK"}]}},"_type":"markdown","_id":"content:4.examples:register-participant.md","_source":"content","_file":"4.examples/register-participant.md","_extension":"md"},{"_path":"/examples/send-payment","_dir":"examples","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Sending Payments","description":"This example shows how to send a payment from one account to another via the Gevamu Payments Solution.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"sending-payments"},"children":[{"type":"text","value":"Sending Payments"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This example shows how to send a payment from one account to another via the Gevamu Payments Solution."}]},{"type":"element","tag":"mermaid","props":{"code":"Y2xhc3NEaWFncmFtCiAgY2xhc3MgR2V2YW11RmFjYWRlIHsKICAgICsgc2VuZFBheW1lbnQoKQogIH0="},"children":[]},{"type":"element","tag":"h2","props":{"id":"implementation"},"children":[{"type":"text","value":"Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sending a payment is a one-step operation, consisting of a single "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PaymentFlow"}]},{"type":"text","value":" call."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before starting the flow, provide a payment instruction created according to a chosen payment standard:"}]},{"type":"element","tag":"code","props":{"code":"class ClientApplication(private val gevamuFacade: GevamuFacade) {\n    fun sendPaymentViaGevamu() {\n        // Create payment instruction with payment details\n        val paymentInstruction = PaymentInstruction(/* payment details */)\n        \n        // Specify gateway node for payment processing\n        val gateway = Party(/* gateway node data */)\n        \n        // Use GevamuFacade to send payment instruction to gateway node\n        gevamuFacade.sendPayment(paymentInstruction, gateway)\n    }\n}\n\nclass GevamuFacade(private val serviceHub: AppServiceHub): SingletonSerializeAsToken() {\n  fun sendPayment(\n    paymentInstruction: PaymentInstruction,\n    gateway: Party\n  ): List<StateAndRef<Payment>> {\n    val flowHandle = serviceHub.startFlow(PaymentFlow(paymentInstruction, gateway))\n    return flowHandle.returnValue.get()\n  }\n}\n","language":"kotlin","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"ClientApplication"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"gevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4b03e"},"children":[{"type":"text","value":"sendPaymentViaGevamu"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b7b7ba"},"children":[{"type":"text","value":"// Create payment instruction with payment details"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" paymentInstruction "}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"PaymentInstruction"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b7b7ba"},"children":[{"type":"text","value":"/* payment details */"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b7b7ba"},"children":[{"type":"text","value":"// Specify gateway node for payment processing"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" gateway "}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"Party"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-b7b7ba"},"children":[{"type":"text","value":"/* gateway node data */"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b7b7ba"},"children":[{"type":"text","value":"// Use GevamuFacade to send payment instruction to gateway node"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"        gevamuFacade.sendPayment(paymentInstruction, gateway)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"GevamuFacade"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"serviceHub"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"AppServiceHub"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"): "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"SingletonSerializeAsToken"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"fun"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4b03e"},"children":[{"type":"text","value":"sendPayment"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"paymentInstruction"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"PaymentInstruction"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"gateway"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"Party"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"  ): "}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"StateAndRef"}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"Payment"}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":">>"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"val"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" flowHandle "}]},{"type":"element","tag":"span","props":{"class":"ct-51e52a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" serviceHub.startFlow("}]},{"type":"element","tag":"span","props":{"class":"ct-158ebd"},"children":[{"type":"text","value":"PaymentFlow"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"(paymentInstruction, gateway))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2df2ab"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":" flowHandle.returnValue.get()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-dbfdc8"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"transaction-lifecycle"},"children":[{"type":"text","value":"Transaction lifecycle"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When creating a payment transaction, use one of the formats listed in "},{"type":"element","tag":"a","props":{"href":"https://gevamu.github.io/corda-payments-sdk/payments-workflows/com.gevamu.corda.flows/-payment-instruction-format/index.html","rel":["nofollow"],"target":"_blank"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PaymentInstructionFormat"}]}]},{"type":"text","value":" enum."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once a payment instruction is received, the Gevamu Payment Solution validates the payment by checking the Participant node's identity and the Participant ID, and authorizes it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the validation passes, the Payment Gateway sets the payment status to ‘Sent to Gateway’ and communicates the status change back to the Participant's node."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If a payment initiation request contains multiple payment instructions, multiple payment states will be created and independently updated."}]},{"type":"element","tag":"notice","props":{":info":"true","info":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Every single payment within payment initiation request gets it's own unique ID (UUID). This ID can be used to find the payment, if necessary."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On the side of the Payment Services Provider, the transaction can be accepted or rejected.\nIf payment cannot be immediately completed, the \"Pending\" status is returned.\nOnce the Gevamu Payment Gateway receives a new status from the PSP, the payment state will be updated with the final status."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find sequence diagrams of payment processing and payment state transition below:"}]},{"type":"element","tag":"mermaid","props":{"code":"c2VxdWVuY2VEaWFncmFtCiAgcGFydGljaXBhbnQgQ0EgYXMgQ2xpZW50QXBwbGljYXRpb24KICBwYXJ0aWNpcGFudCBQQ0QgYXMgR2V2YW11RmFjYWRlCgogIENBLT4+UENEOiBJbml0aWF0ZSBQYXltZW50CiAgUENELT4+UENEOiBJbml0aWF0ZSBwYXltZW50IDxici8+IHdpdGhpbiBQU1AKICBQQ0QtPj5DQTogUGF5bWVudCBzdGF0dXM6IENyZWF0ZWQKICBQQ0QtPj5QQ0Q6IFBhc3NpdmUgcGF5bWVudCB1cGRhdGUuLi4KICBOb3RlIG92ZXIgQ0EsUENEOiBBZnRlciBzdGF0ZSBjaGFuZ2UKICBDQS0+PlBDRDogUXVlcnkgcGF5bWVudAogIFBDRC0+PkNBOiBQYXltZW50IHdpdGggcmVsZXZhbnQgc3RhdHVz"},"children":[]},{"type":"element","tag":"notice","props":{":info":"true","info":true},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Find more information about payment queries "},{"type":"element","tag":"a","props":{"href":"/examples/query-payment-states"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"mermaid","props":{"code":"c3RhdGVEaWFncmFtLXYyCiAgICBTZW50OiBTZW50IHRvIEdhdGV3YXkKICAgIFsqXSAtLT4gQ3JlYXRlZAogICAgQ3JlYXRlZCAtLT4gU2VudAogICAgU2VudCAtLT4gUGVuZGluZwogICAgU2VudCAgLS0+IEFjY2VwdGVkCiAgICBTZW50ICAtLT4gUmVqZWN0ZWQKICAgIFBlbmRpbmcgLS0+IEFjY2VwdGVkCiAgICBQZW5kaW5nIC0tPiBSZWplY3RlZAogICAgQWNjZXB0ZWQgLS0+IFsqXQogICAgUmVqZWN0ZWQgLS0+IFsqXQ=="},"children":[]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-51e52a{color:#56B6C2}\n.ct-b7b7ba{color:#7F848E}\n.ct-c4b03e{color:#61AFEF}\n.ct-158ebd{color:#E5C07B}\n.ct-dbfdc8{color:#ABB2BF}\n.ct-2df2ab{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"implementation","depth":2,"text":"Implementation"},{"id":"transaction-lifecycle","depth":2,"text":"Transaction lifecycle"}]}},"_type":"markdown","_id":"content:4.examples:send-payment.md","_source":"content","_file":"4.examples/send-payment.md","_extension":"md"}],"navigation":[{"title":"What's Gevamu?","_path":"/"},{"title":"Application","_path":"/application"},{"title":"Workflow","_path":"/workflow","children":[{"title":"1. BNO onboarding","_path":"/workflow/bno-onboarding"},{"title":"2. Participant onboarding","_path":"/workflow/participant-onboarding"},{"title":"3. Payment initiation","_path":"/workflow/payment-initiation"}]},{"title":"Examples","_path":"/examples","children":[{"title":"Payment state queries","_path":"/examples/query-payment-states"},{"title":"Participant registration","_path":"/examples/register-participant"},{"title":"Sending Payments","_path":"/examples/send-payment"}]}]}