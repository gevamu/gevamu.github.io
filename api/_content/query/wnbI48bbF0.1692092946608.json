{"_path":"/workflow/payment-initiation","_dir":"workflow","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"3. Payment initiation","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"3-payment-initiation"},"children":[{"type":"text","value":"3. Payment initiation"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Participant initiates the payment transaction off-chain via a Web UI. The payment request is handled by a web server on the Participant’s node of the Corda business network and sent via Corda RPC to the custom Payment CorDapp installed on the Participant’s node."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Participant’s request is accepted by the CorDapp on the Participant’s node and is transformed to a payment instruction formatted according to the industry-accepted payment standard (ISO 20022 formatted XML representing a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CustomerCreditTransferInitiation"}]},{"type":"text","value":" message) to be passed to Gevamu Payments SDK. Gevamu Payments SDK pre-validates the payment instruction and creates a state (or several states if multiple payments are instructed) with an attachment containing the original payment instruction. Every single payment gets it's own unique ID (UUID), which can be used to find it, if necessary."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The payment instruction is sent to Gevamu Payments Gateway."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The Gevamu Payments Gateway validates the payment instruction."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The Payments Gateway checks if the Participant is authorized to submit this payment request, validating the payment instruction from the following aspects:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Node Identity – whether a payment request is received from the node that initially registered the Participant initiating the request."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Participant ID – whether the Participant is registered with the Payments network and if Participant ID is registered to the Participant’s node."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If valid, the Payment Gateway sends the payment instruction to the external gateway of the PSP, updates the status of the payment instruction to "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Sent to Gateway"}]},{"type":"text","value":" and communicates it to the Participant."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If not valid, a corresponding status is sent back to the Participant’s CorDapp."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"After the payment instruction is received by the PSP, it will return one of the following payment status:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Pending"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Accepted"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Rejected"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Once the PSP replies to the payment request, the returned payment status is propagated back to the Participant’s node. The updated status is made available as a new Corda state in the payment statuses chain."},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The participant’s CorDapp may opt to subscribe to the payment state updates to be notified on Payment processing progress."}]}]}]}]},{"type":"element","tag":"mermaid","props":{"code":"LS0tCnRpdGxlOiBJbml0aWF0ZSBQYXltZW50Ci0tLQpzZXF1ZW5jZURpYWdyYW0KICAgICUlIFBhcnRpY2lwYW50cwogICAgcGFydGljaXBhbnQgcG4gYXMgUGFydGljaXBhbnQgTm9kZQogICAgcGFydGljaXBhbnQgZ3BnIGFzIEdldmFtdSBQYXltZW50IEdhdGV3YXkKICAgIHBhcnRpY2lwYW50IHBzcCBhcyBQU1AvQmFuawoKICAgIHBuIC0+PiBwbjogUmVjZWl2ZSBQYXltZW50IGluc3RydWN0aW9uLCAgPGJyLz4gdHJhbnNmb3JtIGludG8gSVNPIDIwMDIyIGZvcm1hdHRlZCBYTUwKICAgIHBuIC0+PiBwbjogU0RLIHByZXZhbGlkYXRlcyBYTUwKCiAgICAlJXByZXZhbGlkYXRpb24gYnkgU0RLCiAgICAKICAgIHBuICAtPj4gIHBuOiBDcmVhdGUgQ29yZGEgc3RhdGUKICAgIHBuICAtPj4gZ3BnOiBQYXltZW50IHJlcXVlc3QKICAgIGdwZyAtPj4gZ3BnOiBWYWxpZGF0ZSBwYXltZW50IHJlcXVlc3QgIDxici8+IChjaGVjayBub2RlIGFuZCBQYXJ0aWNpcGFudCBpZGVudGl0eSkKCiAgICAlJSBhZnRlciB2YWxpZGF0aW9uIGJ5IEdhdGV3YXkKCiAgICBncGcgLT4+IHBzcDogUGF5bWVudCBpbnN0cnVjdGlvbgogICAgZ3BnIC0+PiBwbjogIFVwZGF0ZSBDb3JkYSBzdGF0ZSA8YnIvPiBQYXltZW50IFN0YXR1czogU2VudCB0byBHYXRld2F5CgogICAgJSUgUGVuZGluZyBTdGF0dXMgYnkgUFNQCiAgICBhbHQgUFNQIHNldHMgUGF5bWVudCBzdGF0dXMgYXMgUGVuZGluZwogICAgcHNwIC0+PiBncGc6IFBheW1lbnQgU3RhdHVzOiBQZW5kaW5nCiAgICBncGcgLT4+IHBuIDogVXBkYXRlIENvcmRhIHN0YXRlIDxici8+IFBheW1lbnQgU3RhdHVzOiBQZW5kaW5nIAogICAgCiAgICAlJSBSZXF1ZXN0IGhhcyBiZWVuIHByb2Nlc3NlZCBieSBQU1AgCiAgICBlbHNlIFBTUCBwcm9jZXNzZXMgUGF5bWVudCBJbnN0cnVjdGlvbgogICAgcHNwIC0+PiBncGc6IFBheW1lbnQgU3RhdHVzOiBBY2NlcHRlZC9SZWplY3RlZAogICAgZ3BnIC0+PiBwbiA6IFVwZGF0ZSBDb3JkYSBzdGF0ZSA8YnIvPiBQYXltZW50IFN0YXR1czogQWNjZXB0ZWQvUmVqZWN0ZWQgCiAgICBlbmQ="},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.workflow:4.payment-initiation.md","_source":"content","_file":"3.workflow/4.payment-initiation.md","_extension":"md"}